(function(t){function e(e){for(var r,c,a=e[0],u=e[1],l=e[2],d=0,f=[];d<a.length;d++)c=a[d],Object.prototype.hasOwnProperty.call(o,c)&&o[c]&&f.push(o[c][0]),o[c]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(t[r]=u[r]);s&&s(e);while(f.length)f.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],r=!0,a=1;a<n.length;a++){var u=n[a];0!==o[u]&&(r=!1)}r&&(i.splice(e--,1),t=c(c.s=n[0]))}return t}var r={},o={app:0},i=[];function c(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=t,c.c=r,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)c.d(n,r,function(e){return t[e]}.bind(null,r));return n},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],u=a.push.bind(a);a.push=e,a=a.slice();for(var l=0;l<a.length;l++)e(a[l]);var s=u;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"2a75":function(t,e,n){"use strict";n("851b")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23");function o(t,e,n,o,i,c){var a=Object(r["i"])("Grid");return Object(r["e"])(),Object(r["c"])("div",null,[Object(r["d"])(a,{title:"sudoku solver",gridVals:i.gridCandidates,hint:t.hintOutput,highlights:t.highlights},null,8,["gridVals","hint","highlights"]),Object(r["d"])("button",{onClick:e[1]||(e[1]=function(){return c.action&&c.action.apply(c,arguments)})},"get hint")])}var i=n("2909"),c=(n("a630"),n("3ca3"),n("d81d"),n("a15b"),n("159b"),n("caad"),n("2532"),n("ade3")),a=Object(r["k"])("data-v-b6d49a20");Object(r["g"])("data-v-b6d49a20");var u={id:"svgfilters"},l=Object(r["d"])("filter",{id:"motionblur"},[Object(r["d"])("feConvolveMatrix",{order:"20, 1",kernelMatrix:"1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"})],-1),s=Object(r["d"])("filter",{x:"-2%",y:"-2%",width:"104%",height:"104%",filterUnits:"objectBoundingBox",id:"PencilTexture"},[Object(r["d"])("feTurbulence",{type:"fractalNoise",baseFrequency:"1.2",numOctaves:"3",result:"noise"}),Object(r["d"])("feDisplacementMap",{xChannelSelector:"R",yChannelSelector:"G",scale:"3",in:"SourceGraphic",result:"newSource"})],-1),d={id:"roughpaper",x:"0%",y:"0%",width:"100%",height:"100%"},f=Object(r["d"])("feTurbulence",{type:"fractalNoise",baseFrequency:"0.04",result:"noise",numOctaves:"5"},null,-1),b={in:"noise","lighting-color":"white",surfaceScale:"2"},h={id:"grid"};Object(r["f"])();var g=a((function(t,e,n,o,i,a){var g,p=Object(r["i"])("feDistantLight");return Object(r["e"])(),Object(r["c"])("div",null,[Object(r["d"])("h2",null,Object(r["j"])(n.title),1),(Object(r["e"])(),Object(r["c"])("svg",u,[Object(r["d"])("defs",null,[l,s,Object(r["d"])("filter",d,[f,Object(r["d"])("feDiffuseLighting",b,[Object(r["d"])(p,{azimuth:"45",elevation:"60"})])])])])),Object(r["d"])("div",h,[(Object(r["e"])(!0),Object(r["c"])(r["a"],null,Object(r["h"])(i.gridData,(function(e,n){var o;return Object(r["e"])(),Object(r["c"])("div",{class:["square",(o={},Object(c["a"])(o,e.type,!0),Object(c["a"])(o,e.highlight,e.highlight),Object(c["a"])(o,e.rotate,e.rotate),o)],key:n,gridSingle:e.gridSingle,collectionSingle:e.collectionSingle,onClick:function(e){return a.squareInput(t.e,n)}},Object(r["j"])(a.getSquareVal(e)),11,["gridSingle","collectionSingle","onClick"])})),128))]),Object(r["d"])("p",null,Object(r["j"])(null===(g=n.hint)||void 0===g?void 0:g.message),1),Object(r["d"])("button",{onClick:e[1]||(e[1]=function(){return a.toggleInput&&a.toggleInput.apply(a,arguments)})},"input"),Object(r["d"])("button",{onClick:e[2]||(e[2]=function(){return a.togglePossibles&&a.togglePossibles.apply(a,arguments)})},"possibles"),Object(r["d"])("p",null,Object(r["j"])(i.showPossibles),1)])})),p=n("5530"),v={name:"Grid",props:{title:String,gridVals:Array,hint:Object},data:function(){return{gridData:this.gridVals,highlights:{},showPossibles:!1}},methods:{togglePossibles:function(){console.log(this.showPossibles),this.showPossibles?this.showPossibles=!1:this.showPossibles=!0},toggleInput:function(){console.log("input")},squareInput:function(t,e){console.log("sq",e)},getSquareVal:function(t){return"possibles"===t.type?this.showPossibles?t.val:"":"gridSingle"===t.type?"*":t.val}},watch:{gridVals:function(){console.log(this.highlights),this.gridData=this.gridVals.map((function(t){return Object(p["a"])({},t)})),console.log(this.gridData)},hint:function(){console.log("hint change"),this.highlights={target:this.hint.index}}}};n("2a75");v.render=g,v.__scopeId="data-v-b6d49a20";var O=v,j="\n\t\t\t000 004 000\n\t\t\t008 000 020\n\t\t\t002 003 150\n\t\n\t\t\t940 080 500\n\t\t\t800 302 006\n\t\t\t007 050 041\n\t\n\t\t\t073 500 900\n\t\t\t060 000 200\n\t\t\t000 100 000\n\t\t";j="\n\t\t\t000 006 800\n\t\t\t000 280 005\n\t\t\t003 500 290\n\t\n\t\t\t071 402 300\n\t\t\t040 000 001\n\t\t\t200 600 400\n\t\n\t\t\t902 701 000\n\t\t\t004 000 000\n\t\t\t080 020 003\n\t\t",j="\n\t\t\t007 500 000\n\t\t\t003 090 006\n\t\t\t640 000 800\n\t\n\t\t\t300 060 000\n\t\t\t020 308 005\n\t\t\t000 040 067\n\t\n\t\t\t009 000 002\n\t\t\t000 004 009\n\t\t\t060 032 150\n\t\t";var x=j,m=(n("ac1f"),n("5319"),n("a9e3"),function(t){return Object(i["a"])(t.replace(/\s/g,"")).map((function(t){return Number(t)}))}),w=m,y=(n("d3b7"),n("6062"),n("ddb0"),n("99af"),n("4ec9"),n("4de4"),n("0481"),function(t){return t.baseArray.filter((function(e){return!t.elementsToRemove.includes(e)}))}),C=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Object(i["a"])(new Set(e.flat()))},S=function(t,e){return new Set(Object(i["a"])(t).filter((function(t){return e.has(t)})))},k=function(){var t=function(t){return~~(t/9)},e=function(t){return t%9},n=function(t){return 3*~~(t/27)+~~(t%9/3)},r=function(t){return t%3+3*~~(t%27/9)},o=function(t,e){var n=27*~~(t/3)+t%3*3,r=9*~~(e/3)+e%3;return n+r},i=function(t,e){return e+9*t},c=function(t,e){return 9*e+t},a=function(t){return Array.from({length:9},(function(e,n){return i(t,n)}))},u=function(t){return Array.from({length:9},(function(e,n){return c(t,n)}))},l=function(t){return Array.from({length:9},(function(e,n){return o(t,n)}))},s=new Map,d={row:[],col:[],box:[]};return function(i){var c,f=i.box,b=i.col,h=i.row,g=i.index;c="number"===typeof f?o(f,g):"number"===typeof b?9*g+b:"number"===typeof h?9*h+g:g;var p=s.get(c);if(!p){var v={row:t(c),col:e(c),box:n(c)};null!==d&&void 0!==d&&d.row[v.row]||(console.log(c,"cacheRow"),d.row[v.row]=a(v.row)),null!==d&&void 0!==d&&d.col[v.col]||(console.log(c,"cacheCol"),d.col[v.col]=u(v.col)),null!==d&&void 0!==d&&d.box[v.box]||(console.log(c,"cacheBox"),d.box[v.box]=l(v.box)),p={gridIndex:c,row:{index:v.row,position:v.col,collection:d.row[v.row]},col:{index:v.col,position:v.row,collection:d.col[v.col]},box:{index:v.box,position:r(c),collection:d.box[v.box]},related:C(d.row[v.row],d.col[v.col],d.box[v.box])},s.set(c,p)}return p}},M=[1,2,3,4,5,6,7,8,9];function E(t,e,n){var r=n({index:t}),o=r.row.collection.map((function(t){return e[t]})),c=r.col.collection.map((function(t){return e[t]})),a=r.box.collection.map((function(t){return e[t]})),u=Object(i["a"])(new Set([].concat(Object(i["a"])(o),Object(i["a"])(c),Object(i["a"])(a))));return y({baseArray:M,elementsToRemove:u})}function P(t){var e=k(),n=t.reduce((function(n,r,o){return r||n.set(o,new Set(E(o,t,e))),n}),new Map);return{gridCandidates:n,gridReference:e}}var D=[1,2,3,4,5,6,7,8,9];function R(t){var e=t.gridCandidates,n=t.gridReference,r=new Map(D.map((function(t){return[t,new Map([["rows",new Map],["cols",new Map],["boxes",new Map]])]})));function o(t,e,n,o){var i=r.get(t).get(e).get(n)||new Set;i.add(o),r.get(t).get(e).set(n,i)}return e.forEach((function(t,e){var r=n({index:e}),i=r.row,c=r.col,a=r.box;t.forEach((function(t){o(t,"rows",i.index,c.index),o(t,"cols",c.index,i.index),o(t,"boxes",a.index,a.position)}))})),r}function I(t){return 1===t.size&&Object(i["a"])(t)[0]}function T(t){var e=[];return t.forEach((function(t,n){if(1===t.size){var r=Object(i["a"])(t)[0];e.push({number:r,index:n})}})),e}function L(t,e){var n=[];return t.forEach((function(t,r){var o=q(t,e);o.length&&n.push({number:r,result:o})})),n}function q(t,e){var n=[];return t.forEach((function(t,r){n.push(A(t,r,e))})),n.flat()}function A(t,e,n){var r=[];return t.forEach((function(t,o){var i=n(t,e);!1!==i&&r.push({index:o,candidateList:i,type:e})})),r}function N(t,e){if(t.size<2||t.size>3)return!1;var n=Object(i["a"])(t),r=n[0];return(n.every((function(t){return Math.floor(t/3)===Math.floor(r/3)}))||!("boxes"!==e||!n.every((function(t){return t%3===r%3}))))&&n}function F(t,e){var n=[];return t.forEach((function(t){t.result.forEach((function(r){var o,a,u=r.type;"boxes"===u&&(u="box"),"cols"===u&&(u="col",a="col"),"rows"===u&&(u="row",a="row");var l=e.gridReference((o={},Object(c["a"])(o,u,r.index),Object(c["a"])(o,"index",r.candidateList[0]),o));"box"===u&&(a=r.candidateList[0]%3===r.candidateList[1]%3?"col":"row");var s=new Set([].concat(Object(i["a"])(l[a].collection),Object(i["a"])(l.box.collection))),d=r.candidateList.map((function(t){var n;return e.gridReference((n={},Object(c["a"])(n,u,r.index),Object(c["a"])(n,"index",t),n)).gridIndex}));d.forEach((function(t){s.delete(t)}));var f=Object(i["a"])(s).filter((function(n){var r;return null===(r=e.gridCandidates.get(n))||void 0===r?void 0:r.has(t.number)}));f.length&&n.push({number:t.number,toDelete:f,type:u,index:r.index,candidates:r.candidateList,skewer:d})}))})),n}n("25f0"),n("1276"),n("b64b"),n("4e82");function G(t,e){var n=[];return["rows","cols","boxes"].forEach((function(r){for(var o=1;o<=9;o++){var i=B(t,r,o,e);i&&n.push(i)}})),n}function B(t,e,n){for(var r={},o=new Set,c=1;c<=9;c++){var a,u=null===(a=t.get(c))||void 0===a?void 0:a.get(e).get(n);u&&(r[c]=Object(i["a"])(u),o=new Set([].concat(Object(i["a"])(u),Object(i["a"])(o))))}var l=_(r,2);return!!l.length&&{type:e,index:n,pairs:l}}function V(t,e){for(var n=Math.pow(2,e)-Math.pow(2,e-t),r=Math.pow(2,t-1)+1,o=[],i=r;i<=n;i++){var c=i.toString(2);if(c.replaceAll("0","").length===t){var a=c.split("").reverse().reduce((function(t,e,n){return"1"===e&&t.push(n),t}),[]);o.push(a)}}return o}function _(t,e){var n=Object.keys(t),r=n.reduce((function(e,n){return e.concat(t[n])}),[]),o=Object(i["a"])(new Set(r)).sort(),c=V(e,o.length);return c.reduce((function(r,i){var c=i.map((function(t){return o[t]})),a=n.filter((function(e){return t[e].every((function(t){return c.includes(t)}))}));return a.length===e&&r.push({permutation:c,canContain:a.map((function(t){return parseInt(t,10)}))}),r}),[])}var z=X;function X(t){return"rows"===t?"row":"cols"===t?"col":"boxes"===t?"box":void 0}function H(t,e){var n=[];return t.forEach((function(t){var r=J(t,e);(r.canDeleteFrom.length||r.canDeleteFromX.length)&&n.push(r)})),n}function J(t,e){var n,r=z(t.type),o=e.gridReference((n={},Object(c["a"])(n,r,t.index),Object(c["a"])(n,"index",t.pairs[0].permutation[0]),n)),a=t.pairs[0].permutation.map((function(n){var o;return e.gridReference((o={},Object(c["a"])(o,r,t.index),Object(c["a"])(o,"index",n),o)).gridIndex})),u=o[r].collection.filter((function(t){return!a.includes(t)})),l=o[r].collection.filter((function(t){return a.includes(t)})),s=new Set(t.pairs[0].canContain),d=u.filter((function(t){var n=e.gridCandidates.get(t);return!!n&&S(n,s).size>0})),f=l.filter((function(t){var n=e.gridCandidates.get(t);return!!n&&Object(i["a"])(n).some((function(t){return!s.has(t)}))}));return{blockType:r,type:"deleteableFromBlocks",canDeleteFrom:d,canDeleteFromX:f,blockedIdxs:a,blockNumbers:Object(i["a"])(s)}}function U(t,e,n){var r=t.index,o=Object(c["a"])({},r,"target");e.gridReference({index:r}).related.forEach((function(t){n[t]>0&&(o[t]="blockingNumber")}));var i="".concat(t.number," can only fit here as all other numbers already appear in the same row, column or box");return Object(p["a"])(Object(p["a"])({},t),{},{type:"gridSingle",highlights:o,message:i})}function K(t,e){return Math.floor(t/9)===Math.floor(e/9)}function Q(t,e){return t%9===e%9}function W(t,e){return Math.floor(t/27)===Math.floor(e/27)&&Math.floor(t%9/3)===Math.floor(e%9/3)}function Y(t,e,n){var r,o=z(t.result[0].type),i=e.gridReference((r={},Object(c["a"])(r,o,t.result[0].index),Object(c["a"])(r,"index",t.result[0].candidateList),r)).gridIndex,a=Object(c["a"])({},i,"target"),u=e.gridReference({index:i})[o].collection;u=u.filter((function(t){return t!==i&&e.gridCandidates.get(t)})),u.forEach((function(t){a[t]="not"}));var l=t.number;n.forEach((function(t,e){t===l&&u.some((function(t){return K(e,t)||Q(e,t)||W(e,t)}))&&(a[e]="number")}));var s="".concat(l," can only fit here as its the only place it goes in this ").concat(o);return{number:l,index:i,typeO:o,type:"rcbSingle",highlights:a,message:s}}function Z(t,e){var n;console.log(t);var r=t.toDelete,o=t.type,i=t.skewer,a=t.number,u=t.index,l="".concat(a," candidate line can only fit in these places in this ").concat(o," can remove from ").concat(r),s={},d=e.gridReference((n={},Object(c["a"])(n,o,u),Object(c["a"])(n,"index",0),n))[o].collection;return d.forEach((function(t){s[t]="not"})),r.forEach((function(t){s[t]="target"})),i.forEach((function(t){s[t]="blockingNumber"})),Object(p["a"])(Object(p["a"])({},t),{},{message:l,type:"candidateLine",highlights:s})}function $(t,e){var n=t,r={},o=e.gridReference({index:n.blockedIdxs[0]})[n.blockType].collection;o.forEach((function(t){r[t]="not"})),r[n.blockedIdxs[0]]="target",r[n.blockedIdxs[1]]="target";var i="".concat(n.blockNumbers[0]," and ").concat(n.blockNumbers[1]," can only fit in these places in this ").concat(n.blockType);return Object(p["a"])(Object(p["a"])({},n),{},{type:"blocks",message:i,highlights:r})}function tt(t){return t[Math.floor(Math.random()*t.length)]}function et(t,e,n){var r=L(t,I);if(r.length)return Y(tt(r),e,n);var o=T(e.gridCandidates);if(o.length)return U(tt(o),e,n);var i=L(t,N),c=F(i,e);if(c.length)return console.log(c),Z(c[0],e);var a=G(t,e),u=H(a,e);return u.length?$(u[0],e):{}}var nt,rt=function(t){console.log(t);var e=P(t);function n(){console.time("Time this");var t=R(e);return console.timeEnd("Time this"),{rowColBoxCandidates:t}}var r=n(),o=r.rowColBoxCandidates;function c(){var r=n();return o=r.rowColBoxCandidates,et(o,e,t)}function a(r,c){t[r]=c,e.gridCandidates.delete(r);var a=e.gridReference({index:r}),u=Object(i["a"])(new Set([].concat(Object(i["a"])(a.row.collection),Object(i["a"])(a.col.collection),Object(i["a"])(a.box.collection))));u.forEach((function(t){var n;null===(n=e.gridCandidates.get(t))||void 0===n||n.delete(c)}));var l=n();o=l.rowColBoxCandidates}function u(t,n){var r;null===(r=e.gridCandidates.get(t))||void 0===r||r.delete(n)}return{getGrid:function(){return t},getGridCandidates:function(){return e.gridCandidates},hint:c,setSquare:a,deleteCandidate:u}},ot=rt,it=w(x),ct=ot(it),at=ct.getGridCandidates,ut=ct.hint,lt=ct.setSquare,st=ct.getGrid,dt=ct.deleteCandidate,ft=st(),bt=Object(i["a"])(ft),ht=at(),gt=Array.from({length:81},(function(){return"r"+Math.floor(6*Math.random())}));function pt(t,e){var n,r=(null===(n=nt)||void 0===n?void 0:n.highlights)||{};return t.map((function(t,n){return e[n]>0?{val:t,type:"original",highlight:r[n]}:t>0?{val:t,highlight:r[n],rotate:gt[n]}:{val:Object(i["a"])(ht.get(n)).join(" "),type:"possibles",highlight:r[n]}}))}var vt={name:"App",components:{Grid:O},data:function(){return{gridCandidates:pt(ft,bt)}},computed:function(){return{gridCandidates2:pt(ft,bt)}},created:function(){console.log("created"),this.showHint(nt)},methods:{showHint:function(t){console.log("show",t)},action:function(){var t;nt&&("gridSingle"===nt.type||"rcbSingle"===nt.type?lt(nt.index,nt.number):"candidateLine"===nt.type?nt.toDelete.forEach((function(t){return dt(t,nt.number)})):"blocks"===nt.type&&(console.log(nt),nt.canDeleteFrom.forEach((function(t){nt.blockNumbers.forEach((function(e){dt(t,e)}))})),nt.canDeleteFromX.forEach((function(t){[1,2,3,4,5,6,7,8,9].forEach((function(e){nt.blockNumbers.includes(e)||dt(t,e)}))}))),ft=st(),ht=at()),nt=ut(),console.log(nt),null!==(t=nt)&&void 0!==t&&t.type?(this.hintOutput=nt,this.highlights=nt.index):this.hintOutput="no next",this.gridCandidates=Object(i["a"])(pt(ft,bt))}}};n("9e41");vt.render=o;var Ot=vt;Object(r["b"])(Ot).mount("#app")},"69fc":function(t,e,n){},"851b":function(t,e,n){},"9e41":function(t,e,n){"use strict";n("69fc")}});
//# sourceMappingURL=app.a91eb347.js.map